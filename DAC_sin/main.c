/*
 * main.c
 *
 *  Created on: Apr 16, 2016
 *      Author: m.mamdooh
 */
#include "type.h"
#include "DIO-interface.h"
#include "TIM0_interface.h"
#include "GLOB_INT.h"
#include "ADC_interface.h"


void main (void)
{
	u8 DAC_VAL=0 ,test ;
	u16 TIME_READ=0;
	u8 arr[]={127.500000000000,140.228760622471,152.830339676370,165.178826349321,177.150838644353,188.626756172036,199.491915357867,209.637755122806,218.962901589689,227.374180977504,234.787550563007,241.128938407833,246.334983460821,250.353668640692,253.144840573529,254.680610792017,254.945634387792,253.937263332690,251.665572936970,248.153261180145,243.435421920274,237.559194247731,230.583291486998,222.577414552532,213.621555520272,203.805198373254,193.226424907237,181.990934729813,170.210989144878,158.004289474783,145.492801027633,132.801534460245,120.057296712984,107.387423996736,94.9185094915790,82.7751384695735,71.0786434799063,59.9458920341671,49.4881189048033,39.8098147040433,31.0076818482392,23.1696683392876,16.3740890172675,10.6888430644445,6.17073557908670,2.86490999770013,0.804397036733274,0.00978466057714400,0.489012373430327,2.23729189039761,5.23715498044985,9.45862800321411,14.8595313956804,21.3859011164526,28.9725278366116,37.5436084897750,47.0135036712790,57.2875933188012,68.2632221247459,79.8307252341448,91.8745239796370,104.274280705308,116.906101140769};
	DIO_voidInit();
	TIM0_voidInit();
	ADC_voidInit();
	ADC_voidEnable();
TIM0_u8TimerEnabl();

SEI();
	while(1)
	{
		ADC_u8ReadCh_SSht(0,&TIME_READ);
		TIM0_u8SetTime((TIME_READ/4));
		test=TIM0_u8GetTimFlg();
		if(test==1)
		{
			DIO_u8WritePortVal(1,arr[DAC_VAL]);
			DAC_VAL++;
			if(DAC_VAL==(sizeof(arr)-1))
				DAC_VAL=0;
			TIM0_voiResetTimFlg();
			TIM0_voiResetTimer();
		}
	}
}
